<!-- Polymer dependencies -->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../project-madhouse-org/project-madhouse-org-behavior.html">


<!-- Style dependency -->
<link rel="import" href="org-view-style.html">

<dom-module id="org-view">
  <template>
    <style is="custom-style" include="org-view-style">
      :host {
        display: block;
      }
    </style>
    <firebase-document
      path="[[orgPath.org]]/[[orgid]]"
      data="{{orgDetail}}"
    >
    </firebase-document>
    <h1>Title [[orgDetail.title]]</h1>
    <a href="#" id="add-member" on-tap="_addMember">
      <paper-button raised>Add Member</paper-button>
    </a>
    <paper-button raised>Add Event</paper-button>
    <paper-button raised>Add Cause</paper-button>

  </template>

  <script>
    Polymer({
      is: 'org-view',
      behaviors: [
        PROJECTMADHOUSE.ProjectMadhouseOrgBehavior
      ],
      
      properties: {
        orgid: {
          type: String,
          notify: true
        },
        
        orgDetail: {
          type: Object,
          notify: true
        }
      },
      
      _addMember: function(e) {
        var el = this.$$('#add-member');
        
        var key = firebase.database().ref(this.orgPath.org).push().key;
        el.setAttribute('href', '/member/' + key + '/edit');
      }
      
    });
  </script>
</dom-module>
